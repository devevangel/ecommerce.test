(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{47:function(e,t,a){e.exports=a(77)},77:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(15),l=a.n(c),o=(a(52),a(53),a(54),a(5)),i=a(9),m=a(16),s=a(4),u=a(6),d=a(2),E="https://ecommerce-test-v1.herokuapp.com/api",p=function(){return void 0!==typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},g=Object(i.g)((function(e){var t=e.history,a=Object(n.useState)(!1),c=Object(u.a)(a,2),l=c[0],o=c[1];return r.a.createElement(d.s,{color:"indigo",dark:!0,expand:"md"},r.a.createElement(d.t,null,r.a.createElement(d.r,{to:"/"},r.a.createElement("strong",{className:"white-text"},"Logo"))),r.a.createElement(d.v,{onClick:function(){o(!l)}}),r.a.createElement(d.h,{id:"navbarCollapse3",isOpen:l,navbar:!0},r.a.createElement(d.u,{left:!0},r.a.createElement(d.q,null,r.a.createElement(d.r,{to:"/shop"},"Shop")),r.a.createElement(d.q,null,1===function(){try{var e=p().user.role;if(void 0!==e)return e}catch(t){if(t)return 0}}()?r.a.createElement(d.r,{to:"/admin/dashboard"},"Dashboard"):r.a.createElement(d.r,{to:"/user/dashboard"},"Dashboard")),!p()&&r.a.createElement(n.Fragment,null,r.a.createElement(d.q,null,r.a.createElement(d.r,{to:"/signup"},"Sign up")),r.a.createElement(d.q,null,r.a.createElement(d.r,{to:"/signin"},"Sign in"))),p()&&r.a.createElement(n.Fragment,null,r.a.createElement(d.q,null,r.a.createElement(d.r,{onClick:function(){return function(e){if(void 0!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(E,"/signout"),{method:"GET"}).then((function(e){console.log("Signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},to:"/signin"},"Sign out")))),r.a.createElement(d.u,{right:!0},r.a.createElement(d.q,null,r.a.createElement(d.j,{waves:!0},r.a.createElement("div",{className:"md-form my-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search Products","aria-label":"Search"})))))))})),f=function(e){var t=e.title,a=void 0===t?"Title":t,n=e.description,c=void 0===n?"Description":n,l=e.className,o=e.children;return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(d.n,{fluid:!0},r.a.createElement(d.i,null,r.a.createElement("h2",{className:"display-4"},a),r.a.createElement("p",{className:"lead"},c))),r.a.createElement("div",{className:l},o))},b=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=a.name,i=a.email,p=a.password,g=a.success,b=a.error,h=function(e){return function(t){c(Object(s.a)(Object(s.a)({},a),{},Object(m.a)({error:!1},e,t.target.value)))}},y=function(e){var t;e.preventDefault(),(t={name:l,email:i,password:p},fetch("".concat(E,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?c(Object(s.a)(Object(s.a)({},a),{},{error:e.error,success:!1})):c(Object(s.a)(Object(s.a)({},a),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return r.a.createElement(f,{title:"Sign up",description:"Sign up Node React ecommerce App"},r.a.createElement(d.i,null,r.a.createElement("div",{className:"alert alert-success",style:{display:g?"":"none"}},"Account created, please ",r.a.createElement(o.b,{to:"/signin"},"Sign in")),r.a.createElement("div",{className:"alert alert-danger",style:{display:b?"":"none"}},b),r.a.createElement(d.i,null,r.a.createElement(d.z,{center:!0},r.a.createElement(d.g,{md:"5"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4"},"Sign up"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(d.m,{label:"Your name",icon:"user",group:!0,type:"text",validate:!0,error:"wrong",success:"right",onChange:h("name"),value:l}),r.a.createElement(d.m,{label:"Your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",onChange:h("email"),value:i}),r.a.createElement(d.m,{label:"Your password",icon:"lock",group:!0,type:"password",validate:!0,onChange:h("password"),value:p})),r.a.createElement("div",{className:"text-center"},r.a.createElement(d.b,{onClick:y,color:"indigo",dark:"true"},"Sign up"))))))))},h=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=a.email,o=a.password,g=a.loading,b=a.error,h=a.redirectToReferrer,y=p().user,v=function(e){return function(t){c(Object(s.a)(Object(s.a)({},a),{},Object(m.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),c(Object(s.a)(Object(s.a)({},a),{},{error:!1,loading:!0})),function(e){return fetch("".concat(E,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:l,password:o}).then((function(e){e.error?c(Object(s.a)(Object(s.a)({},a),{},{error:e.error,loading:!1})):function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){c(Object(s.a)(Object(s.a)({},a),{},{redirectToReferrer:!0}))}))}))};return r.a.createElement(f,{title:"Sign in",description:"Sign in Node React ecommerce App"},r.a.createElement(d.i,null,g&&r.a.createElement(d.y,{material:!0,preloader:!0}),r.a.createElement("div",{className:"alert alert-danger",style:{display:b?"":"none"}},b),r.a.createElement(d.i,null,r.a.createElement(d.z,{center:!0},r.a.createElement(d.g,{md:"5"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(d.m,{label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",onChange:v("email"),value:l}),r.a.createElement(d.m,{label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,onChange:v("password"),value:o})),r.a.createElement("div",{className:"text-center"},r.a.createElement(d.b,{onClick:N,color:"indigo",dark:"true"},"Sign in")))))),h?y&&1===y.role?r.a.createElement(i.a,{to:"/admin/dashboard"}):r.a.createElement(i.a,{to:"/user/dashboard"}):p()?r.a.createElement(i.a,{to:"/"}):void 0))},y=function(e){return fetch("".concat(E,"/products?sortBy=").concat(e,"&order=desc&limit=15"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},v=function(e){var t=e.item,a=e.url;return r.a.createElement("div",null,r.a.createElement(d.e,{src:"".concat(E,"/").concat(a,"/photo/").concat(t._id),alt:t.name,className:"img-fluid rounded-top mb-0",waves:!0}),r.a.createElement("a",null,r.a.createElement("div",{className:"mask rgba-white-slight"})))},N=function(e){var t=e.product;return r.a.createElement("div",{className:"col-lg-3 col-md-6 mb-4"},r.a.createElement("div",{className:"card"},r.a.createElement(v,{item:t,url:"product"}),r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("a",{href:"",className:"grey-text"},r.a.createElement("h5",null,t.name)),r.a.createElement("h5",null,r.a.createElement("strong",null,r.a.createElement("a",{href:"",className:"dark-grey-text"},t.description))),r.a.createElement("h4",{className:"font-weight-bold blue-text"},r.a.createElement("strong",null,t.price,"$")),r.a.createElement("div",null,r.a.createElement(d.b,{outline:!0,color:"indigo"},"View Product"),r.a.createElement(d.b,{outline:!0,color:"warning"},"Add to Cart")))))},j=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),i=o[0],m=o[1],s=Object(n.useState)(!1),E=Object(u.a)(s,2),p=(E[0],E[1]);return Object(n.useEffect)((function(){y("createdAt").then((function(e){e.error?p(e.error):m(e)})),y("sold").then((function(e){e.error?p(e.error):c(e)}))}),[]),r.a.createElement(f,{title:"Home Page",description:"Node React ecommerce App",className:"container-fluid"},r.a.createElement(d.i,{fluid:!0},r.a.createElement("h1",{className:"text-center"},"New Arrivals"),r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("div",{className:"row wow fadeIn"},i.map((function(e,t){return r.a.createElement(N,{key:t,product:e,sort:!0})})))),r.a.createElement("h1",{className:"text-center"},"BestSellers"),r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("div",{className:"row wow fadeIn"},a.map((function(e,t){return r.a.createElement(N,{key:t,product:e})}))))))},O=a(24),w=function(e){var t=e.component,a=Object(O.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return p()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{form:e.location}}})}}))},x=function(){var e=p().user,t=e.name,a=e.email,n=e.role;return r.a.createElement(f,{title:"Dasboard",description:"G'day ".concat(t,"!"),className:"container-fluid"},r.a.createElement(d.i,null,r.a.createElement(d.z,null,r.a.createElement(d.g,{style:{margin:"5px"}},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement(d.o,null,r.a.createElement(d.p,null,r.a.createElement(d.f,null,"User Information")),r.a.createElement(d.p,null,t),r.a.createElement(d.p,null,a),r.a.createElement(d.p,null,1===n?"Admin":"Registered User"))))))),r.a.createElement("div",{className:"w-100"}),r.a.createElement(d.g,{style:{margin:"5px"}},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement(d.o,null,r.a.createElement(d.p,null,r.a.createElement(d.f,null,"User Links")),r.a.createElement(d.p,null,r.a.createElement(o.b,{to:"/cart"},"My Cart")),r.a.createElement(d.p,{tag:"li"},r.a.createElement(o.b,{to:"/profile/update"},"Update Profile")))))))),r.a.createElement("div",{className:"w-100"}),r.a.createElement(d.g,{style:{margin:"5px"}},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement(d.o,null,r.a.createElement(d.p,null,r.a.createElement(d.f,null,"Purchase History")),r.a.createElement(d.p,null,"history"))))))))))},S=function(e){var t=e.component,a=Object(O.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return p()&&1===p().user.role?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{form:e.location}}})}}))},C=function(){var e=p().user,t=e.name,a=e.email,n=e.role;return r.a.createElement(f,{title:"Dasboard",description:"G'day ".concat(t,"!"),className:"container-fluid"},r.a.createElement(d.i,null,r.a.createElement(d.z,null,r.a.createElement(d.g,{style:{margin:"5px"}},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement(d.o,null,r.a.createElement(d.p,null,r.a.createElement(d.f,null,"Admin Information")),r.a.createElement(d.p,null,t),r.a.createElement(d.p,null,a),r.a.createElement(d.p,null,1===n?"Admin":"Registered User"))))))),r.a.createElement("div",{className:"w-100"}),r.a.createElement(d.g,{style:{margin:"5px"}},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement(d.o,null,r.a.createElement(d.p,null,r.a.createElement(d.f,null,"Admin Links")),r.a.createElement(d.p,null,r.a.createElement(o.b,{to:"/create/category"},"Create Category")),r.a.createElement(d.p,{tag:"li"},r.a.createElement(o.b,{to:"/create/product"},"Create Product")))))))))))},k=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),m=i[0],s=i[1],g=Object(n.useState)(!1),b=Object(u.a)(g,2),h=b[0],y=b[1],v=p(),N=v.user,j=v.token,O=function(e){s(""),c(e.target.value)},w=function(e){e.preventDefault(),s(""),y(!1),function(e,t,a){return fetch("".concat(E,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(N._id,j,{name:a}).then((function(e){e.error?s(!0):(s(""),y(!0))}))};return r.a.createElement(f,{title:"Create A New Category",description:"G'day ".concat(N.name,", ready to create a new category"),className:"container-fluid"},r.a.createElement(d.i,null,function(){if(h)return r.a.createElement("div",{className:"alert alert-success",style:{display:h?"":"none"}},a," category has been created successfully.")}(),function(){if(m)return r.a.createElement("div",{className:"alert alert-danger",style:{display:m?"":"none"}},a," category already exists, category name should be unique.")}(),r.a.createElement(d.i,null,r.a.createElement(d.z,{center:!0},r.a.createElement(d.g,{md:"6"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:w},r.a.createElement("p",{className:"h4 text-center py-4"},"New Category"),r.a.createElement("label",{htmlFor:"defaultFormCardNameEx",className:"grey-text font-weight-light"},"Category Name"),r.a.createElement("input",{type:"text",value:a,onChange:O,autoFocus:!0,placeholder:"New Category",id:"defaultFormCardNameEx",className:"form-control",required:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement(d.b,{className:"btn btn-outline-indigo",type:"submit"},"Create Category",r.a.createElement(d.k,{icon:"plus",className:"ml-2"}))),r.a.createElement("div",{className:"mt-5 text-center"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning",style:{textDecoration:"underline"}},"Back to Dashboard"))))))))))},P=function(){var e=p(),t=e.user,a=e.token,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),l=Object(u.a)(c,2),i=l[0],g=l[1],b=i.name,h=i.description,y=i.price,v=i.categories,N=(i.category,i.shipping,i.quantity),j=(i.photo,i.loading),O=i.error,w=i.createdProduct,x=(i.redirectToProfile,i.formData),S=function(){fetch("".concat(E,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?g(Object(s.a)(Object(s.a)({},i),{},{error:e.error})):g(Object(s.a)(Object(s.a)({},i),{},{categories:e,formData:new FormData}))}))};Object(n.useEffect)((function(){S()}),[]);var C=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;x.set(e,a),g(Object(s.a)(Object(s.a)({},i),{},Object(m.a)({},e,a)))}},k=function(e){e.preventDefault(),g(Object(s.a)(Object(s.a)({},i),{},{error:"",loading:!0})),function(e,t,a){return fetch("".concat(E,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t._id,a,x).then((function(e){e.error?g(Object(s.a)(Object(s.a)({},i),{},{error:e.error})):g(Object(s.a)(Object(s.a)({},i),{},{name:"",description:"",price:"",photo:"",category:"",quantity:"",shipping:"",loading:!1,createdProduct:e.name}))}))};return r.a.createElement(f,{title:"Create A New Product",description:"G'day ".concat(t.name,", ready to create a new product"),className:"container-fluid"},r.a.createElement(d.i,null,j&&r.a.createElement(d.k,{icon:"spinner",spin:!0}),r.a.createElement("div",{className:"alert alert-success",style:{display:w?"":"none"}},w," product has been created successfully."),r.a.createElement("div",{className:"alert alert-danger",style:{display:O?"":"none"}},O),r.a.createElement(d.i,null,r.a.createElement(d.z,{center:!0},r.a.createElement(d.g,{md:"6"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:k},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroupFileAddon01"},r.a.createElement(d.k,{icon:"image",size:"lg"}))),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",onChange:C("photo"),className:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},"Product image ..."))),r.a.createElement("br",null),r.a.createElement(d.m,{onChange:C("name"),type:"text",rows:"2",label:"Name",icon:"tag",value:b}),r.a.createElement("br",null),r.a.createElement(d.m,{onChange:C("description"),type:"textarea",rows:"2",label:"Description",icon:"pencil-alt",value:h}),r.a.createElement("br",null),r.a.createElement(d.m,{onChange:C("price"),type:"number",rows:"2",label:"Price",icon:"dollar-sign",value:y}),r.a.createElement("br",null),r.a.createElement(d.m,{onChange:C("quantity"),type:"number",rows:"2",label:"Quantity",icon:"align-center",value:N}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(d.k,{icon:"layer-group",size:"lg"}),r.a.createElement("label",{className:"ml-3 font-weight-lighter text-muted"},"Category"),r.a.createElement("select",{onChange:C("category"),className:"browser-default custom-select"},r.a.createElement("option",null,"Please select"),v&&v.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(d.k,{icon:"shipping-fast",size:"lg",fixed:!0}),r.a.createElement("label",{className:"ml-2 font-weight-lighter text-muted"},"Shipping"),r.a.createElement("select",{onChange:C("shipping"),className:"browser-default custom-select"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement(d.b,{className:"btn btn-outline-indigo",type:"submit"},"Create",r.a.createElement(d.k,{icon:"plus",className:"ml-2"}))),r.a.createElement("div",{className:"mt-5 text-center"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning",style:{textDecoration:"underline"}},"Back to Dashboard"))))))))))},A=a(46),D=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),l=Object(u.a)(c,2),o=l[0],i=l[1],m=function(e){return function(){var t=o.indexOf(e),n=Object(A.a)(o);-1===t?n.push(e):n.splice(t,1),console.log(n),i(n),a(n)}};return t.map((function(e,t){return r.a.createElement(d.p,{key:t,className:"MDBListGroupItemst-unstyled"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{onChange:m(e._id),type:"checkbox",className:"custom-control-input",id:t,value:o.indexOf(-1===e._id)}),r.a.createElement("label",{className:"custom-control-label",htmlFor:t},e.name)))}))},T=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),i=o[0],m=o[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),b=(g[0],g[1]),h=function(){fetch("".concat(E,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?b(e.error):m(e)}))};Object(n.useEffect)((function(){h()}),[]);return r.a.createElement(f,{title:"Shop Page",description:"Search and find products of your choice",className:"container-fluid"},r.a.createElement(d.i,{fluid:!0},r.a.createElement(d.z,null,r.a.createElement(d.g,{className:"col-lg-3 col-md-6  mb-4"},r.a.createElement("h4",{className:"font-weight-bold"},"Filter by Categories"),r.a.createElement(d.o,{style:{height:"10px"}},r.a.createElement(D,{categories:i,handleFilters:function(e){return function(e,t){var n=Object(s.a)({},a);n.filters[t]=e,c(n)}(e,"category")}}))),r.a.createElement(d.g,{className:"col-lg-3 col-md-6 mb-4"},r.a.createElement("h4",{className:"font-weight-bold text-center"},"Products"),r.a.createElement("div",{className:"card"},JSON.stringify(a))))))},F=function(){return r.a.createElement(o.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:j}),r.a.createElement(i.b,{path:"/signup",exact:!0,component:b}),r.a.createElement(i.b,{path:"/signin",exact:!0,component:h}),r.a.createElement(i.b,{path:"/shop",exact:!0,component:T}),r.a.createElement(w,{path:"/user/dashboard",exact:!0,component:x}),r.a.createElement(S,{path:"/admin/dashboard",exact:!0,component:C}),r.a.createElement(S,{path:"/create/category",exact:!0,component:k}),r.a.createElement(S,{path:"/create/product",exact:!0,component:P})))};l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.510eba87.chunk.js.map